{"version":3,"file":"static/js/431.c9d9e2db.chunk.js","mappings":"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","sources":["components/MovieList/MovieList.styled.js","components/MovieList/MovieList.jsx","helpers/normalizeMovies.js","components/Searchbar/Seearchbar.jsx","pages/Movies/Movies.jsx","pages/NotFound/NotFound.jsx","services/movie-api.js"],"sourcesContent":["import styled from '@emotion/styled';\nimport { Link } from 'react-router-dom';\n\nexport const MovieListStyled = styled.ul`\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n`;\n\nexport const MovieListLink = styled(Link)`\n  display: flex;\n  gap: 12px;\n`;\n\nexport const Img = styled.img`\n  width: 185px;\n`;\n\nexport const MovieInfo = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n`;\n","import PropTypes from 'prop-types';\nimport { useLocation } from 'react-router-dom';\nimport {\n  MovieListStyled,\n  MovieListLink,\n  Img,\n  MovieInfo,\n} from './MovieList.styled';\n\nexport default function MovieList({ movies }) {\n  const location = useLocation();\n\n  return (\n    <MovieListStyled>\n      {movies.map(({ id, title, poster_path, vote_average, overview }) => (\n        <li key={id}>\n          <MovieListLink to={`/movies/${id}`} state={{ from: location }}>\n            <Img\n              src={`https://image.tmdb.org/t/p/w154${poster_path}`}\n              alt={`${title}`}\n            />\n            <MovieInfo>\n              <h3>{title}</h3>\n              <p>{overview}</p>\n              <p>{vote_average}</p>\n            </MovieInfo>\n          </MovieListLink>\n        </li>\n      ))}\n    </MovieListStyled>\n  );\n}\n\nMovieList.propTypes = {\n  movies: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      title: PropTypes.string.isRequired,\n      poster_path: PropTypes.string,\n      vote_average: PropTypes.string,\n    }).isRequired\n  ).isRequired,\n};\n","export function normalizeMovies(movies) {\n  return movies.map(\n    ({ id, poster_path, title, tagline, vote_average, overview }) => ({\n      id,\n      title,\n      tagline,\n      poster_path,\n      overview,\n      vote_average: vote_average.toFixed(1),\n    })\n  );\n}\n\nexport function normalizeSingleMovie({\n  id,\n  poster_path,\n  title,\n  tagline,\n  vote_average,\n  overview,\n  genres,\n}) {\n  return {\n    id,\n    title,\n    tagline,\n    poster_path,\n    overview,\n    vote_average: vote_average.toFixed(1),\n    genres: genres.map(({ name }) => name),\n  };\n}\n","import PropTypes from 'prop-types';\n\nexport default function Seearchbar({ onSubmit }) {\n  return (\n    <form onSubmit={onSubmit}>\n      <input type=\"text\" name=\"search\" onChange={e => e.target.value} />\n      <button type=\"submit\">search</button>\n    </form>\n  );\n}\n\nSeearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n","import MovieList from 'components/MovieList/MovieList';\nimport Seearchbar from 'components/Searchbar/Seearchbar';\nimport { normalizeMovies } from 'helpers/normalizeMovies';\nimport NotFound from 'pages/NotFound/NotFound';\nimport { useEffect, useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { searchMovies } from 'services/movie-api';\n\nexport default function Movies() {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const movieName = searchParams.get('query') ?? '';\n\n  const [movies, setMovies] = useState([]);\n  const [error, setError] = useState(false);\n\n  useEffect(() => {\n    if (!movieName) {\n      return;\n    }\n\n    const fetchMoviesByName = async () => {\n      try {\n        const response = await searchMovies(movieName);\n\n        const normalizedMovies = normalizeMovies(response.data.results);\n\n        setMovies(normalizedMovies);\n      } catch (error) {\n        console.log(error);\n        setError(true);\n      }\n    };\n\n    fetchMoviesByName();\n    //Отписаться от запроса\n  }, [movieName]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const form = e.target;\n\n    if (!form.elements.search.value) {\n      return alert('Enter a query');\n    }\n\n    setSearchParams({ query: form.elements.search.value.trim() });\n\n    form.reset();\n  };\n\n  return (\n    <main>\n      <div>Movies Page</div>\n      <Seearchbar onSubmit={handleSubmit} />\n      {error && <NotFound />}\n      {!error && movieName && <MovieList movies={movies} />}\n      {movieName && movies.length === 0 && <NotFound />}\n    </main>\n  );\n}\n","import { Link } from 'react-router-dom';\n\nexport default function NotFound() {\n  return (\n    <>\n      <Link to=\"/\">Go back</Link>\n      <div>Not Found</div>\n    </>\n  );\n}\n","import axios from 'axios';\nexport let controller = new AbortController();\n\nconst API_KEY =\n  'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI1MDllNDQ3NzZkODk4M2I4MjUxZGIyM2UwYTBkMDc2NCIsInN1YiI6IjY0OTk0ZWIxNmY0M2VjMDEzOTliMDJmMSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.zfMWjVI_xe7Qrg38kb3t2TBDdyF9nQKUMfvJwYSbESc';\n\naxios.defaults.baseURL = 'https://api.themoviedb.org/3/';\naxios.defaults.headers.common['Authorization'] = API_KEY;\naxios.defaults.params = {\n  language: 'en-US',\n  sort_by: 'popularity.desc',\n  include_adult: false,\n};\n\nfunction getTrendingMovies() {\n  return axios.get('trending/movie/day', {\n    signal: controller.signal,\n  });\n}\n\nfunction searchMovies(query, page = 1) {\n  return axios.get(`search/movie?query=${query}&page=${page}`);\n}\n\nfunction getMovieDetails(movieId) {\n  return axios.get(`movie/${movieId}`);\n}\n\nfunction getMovieCredits(movieId) {\n  return axios.get(`movie/${movieId}/credits`);\n}\n\nfunction getMovieReviews(movieId) {\n  return axios.get(`movie/${movieId}/reviews`);\n}\n\nexport {\n  getTrendingMovies,\n  searchMovies,\n  getMovieDetails,\n  getMovieCredits,\n  getMovieReviews,\n};\n"],"names":["MovieListStyled","styled","MovieListLink","Link","Img","MovieInfo","MovieList","movies","location","useLocation","map","id","title","poster_path","vote_average","overview","to","state","from","src","alt","normalizeMovies","tagline","toFixed","normalizeSingleMovie","genres","name","Seearchbar","onSubmit","type","onChange","e","target","value","Movies","useSearchParams","searchParams","setSearchParams","movieName","get","useState","setMovies","error","setError","useEffect","fetchMoviesByName","searchMovies","response","normalizedMovies","data","results","console","log","preventDefault","form","elements","search","alert","query","trim","reset","NotFound","length","controller","AbortController","getTrendingMovies","axios","signal","page","getMovieDetails","movieId","getMovieCredits","getMovieReviews","language","sort_by","include_adult"],"sourceRoot":""}